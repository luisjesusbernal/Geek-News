<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin — Geek News</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-dark text-light">
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">Geek News</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link" href="/">Inicio</a></li>
      </ul>
      <div id="navAuth" class="d-flex gap-2"></div>
    </div>
  </div>
</nav>

<main class="container py-5" style="max-width: 820px;">
  <h1 class="h3 mb-4">Panel de administrador</h1>

  <div id="adminAlert" class="alert d-none" role="alert"></div>

  <form id="newsForm" class="card p-4 shadow-sm bg-body-tertiary text-dark">
    <div class="row g-3">
      <div class="col-md-8">
        <label class="form-label">Título *</label>
        <input type="text" id="title" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Sección *</label>
        <select id="section" class="form-select" required>
          <option value="pokemon">Pokémon</option>
          <option value="starwars">Star Wars</option>
          <option value="lotr">LOTR</option>
          <option value="medieval">Medieval</option>
        </select>
      </div>
    <div class="col-12">
        <label class="form-label">URL de imagen (opcional)</label>
        <input type="url" id="image_url" class="form-control" placeholder="https://...">
        <div class="form-text">O bien, sube un archivo:</div>
        <input type="file" id="image_file" class="form-control" accept="image/*">
        <img id="image_preview" class="img-fluid mt-2 d-none" alt="Vista previa">
    </div>

      <div class="col-12">
        <label class="form-label">Extracto (resumen)</label>
        <input type="text" id="excerpt" class="form-control">
      </div>
      <div class="col-12">
        <label class="form-label">Contenido</label>
        <textarea id="content" class="form-control" rows="6"></textarea>
      </div>
      <div class="col-12 form-check">
        <input type="checkbox" id="published" class="form-check-input">
        <label class="form-check-label" for="published">Publicada</label>
      </div>
    </div>

    <div class="d-flex gap-2 mt-4">
      <button class="btn btn-success" type="submit">Guardar noticia</button>
      <button class="btn btn-outline-secondary" type="reset">Limpiar</button>
    </div>
  </form>
<hr class="my-5">

<section class="container" style="max-width: 960px;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h5 mb-0">Noticias recientes</h2>
    <button id="reloadNews" class="btn btn-outline-light btn-sm">Recargar</button>
  </div>

  <div class="table-responsive">
    <table class="table table-dark table-striped align-middle" id="adminNewsTable">
      <thead>
        <tr>
          <th style="width: 60px;">ID</th>
          <th>Título</th>
          <th>Sección</th>
          <th style="width: 120px;">Estado</th>
          <th style="width: 160px;">Fecha</th>
          <th style="width: 120px;"></th>
        </tr>
      </thead>
      <tbody><!-- se rellena con JS --></tbody>
    </table>
  </div>
</section>

<hr class="my-5">

<section class="container" style="max-width: 960px;">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="h5 mb-0">Suscriptores del newsletter</h2>
    <button id="reloadSubs" class="btn btn-outline-light btn-sm">Recargar</button>
  </div>

  <div class="table-responsive">
    <table class="table table-dark table-striped align-middle" id="subsTable">
      <thead>
        <tr>
          <th style="width: 80px;">ID</th>
          <th>Email</th>
          <th style="width: 180px;">Fecha</th>
          <th class="text-end">Acciones</th>
        </tr>
      </thead>
      <tbody><!-- se rellena con JS --></tbody>
    </table>
  </div>
</section>
<hr class="my-5">

<section class="container" style="max-width: 960px;">
  <h2 class="h5 mb-3">Campañas de newsletter</h2>

  <form id="campaignForm" class="card p-3 mb-4 bg-body-tertiary text-dark">
    <div class="mb-3">
      <label class="form-label">Asunto *</label>
      <input type="text" id="campSubject" class="form-control" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Cuerpo *</label>
      <textarea id="campBody" rows="6" class="form-control" placeholder="Contenido del correo en texto libre o simple HTML" required></textarea>
    </div>
    <div class="d-flex gap-2">
      <button class="btn btn-success" type="submit">Crear campaña</button>
      <button class="btn btn-outline-secondary" type="reset">Limpiar</button>
    </div>
  </form>

  <div class="d-flex justify-content-between align-items-center mb-2">
    <h3 class="h6 mb-0">Listadas</h3>
    <button id="reloadCamps" class="btn btn-outline-light btn-sm">Recargar</button>
  </div>

  <div class="table-responsive">
    <table class="table table-dark table-striped align-middle" id="campsTable">
      <thead>
      <tr>
        <th style="width:70px;">ID</th>
        <th>Asunto</th>
        <th style="width: 190px;">Fecha</th>
        <th style="width: 160px;"></th>
      </tr>
      </thead>
      <tbody><!-- JS --></tbody>
    </table>
  </div>
</section>


</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="nav.js"></script>
<script src="admin.js"></script>
</body>
</html>
